from __future__ import annotations

# Paste your full MODEL_DEF here (truncated here for brevity)
MODEL_DEF = {
    "Apple": {
        "iPhone 11": {
            "colours": ["BLACK", "WHITE", "RED", "YELLOW", "PURPLE", "GREEN"],
            "storage": ["64GB", "128GB", "256GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 11 PRO": {
            "colours": ["SPACE GRAY", "GOLD", "SILVER", "MIDNIGHT GREEN"],
            "storage": ["64GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 11 PRO MAX": {
            "colours": ["SPACE GRAY", "GOLD", "SILVER", "MIDNIGHT GREEN"],
            "storage": ["64GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 12": {
            "colours": ["BLACK", "BLUE", "WHITE", "GREEN", "PURPLE", "RED"],
            "storage": ["64GB", "128GB", "256GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 12 PRO": {
            "colours": ["SILVER", "GRAPHITE", "GOLD", "PACIFIC BLUE"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 12 PRO MAX": {
            "colours": ["SILVER", "GRAPHITE", "GOLD", "PACIFIC BLUE"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 13": {
            "colours": ["RED", "STARLIGHT", "BLUE", "MIDNIGHT", "PINK", "GREEN"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 13 PRO": {
            "colours": ["GRAPHITE", "GOLD", "SILVER", "SIERRA BLUE", "ALPINE GREEN"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 13 PRO MAX": {
            "colours": ["GRAPHITE", "GOLD", "SILVER", "SIERRA BLUE", "ALPINE GREEN"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 13 MINI": {
            "colours": ["RED", "STARLIGHT", "BLUE", "MIDNIGHT", "PINK", "GREEN"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 14": {
            "colours": ["RED", "STARLIGHT", "BLUE", "MIDNIGHT", "PURPLE", "YELLOW"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 14 PLUS": {
            "colours": ["RED", "STARLIGHT", "BLUE", "MIDNIGHT", "PURPLE", "YELLOW"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 14 PRO": {
            "colours": ["SILVER", "SPACE BLACK", "GOLD", "DEEP PURPLE"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 14 PRO MAX": {
            "colours": ["SILVER", "SPACE BLACK", "GOLD", "DEEP PURPLE"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 15": {
            "colours": ["BLACK", "BLUE", "GREEN", "YELLOW", "PINK"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 15 PRO": {
            "colours": ["BLACK TITANIUM", "NATURAL TITANIUM", "WHITE TITANIUM", "BLUE TITANIUM"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 15 PRO MAX": {
            "colours": ["BLACK TITANIUM", "NATURAL TITANIUM", "WHITE TITANIUM", "BLUE TITANIUM"],
            "storage": ["256GB", "512GB", "1000GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 15 PLUS": {
            "colours": ["BLACK", "BLUE", "GREEN", "YELLOW", "PINK"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS", "ES"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 16": {
            "colours": ["ULTRAMARINE", "PINK", "TEAL", "BLACK", "WHITE"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 16 PRO": {
            "colours": ["BLACK TITANIUM", "NATURAL TITANIUM", "WHITE TITANIUM", "DESERT TITANIUM"],
            "storage": ["128GB", "256GB", "512GB", "1000GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 16 PRO MAX": {
            "colours": ["BLACK TITANIUM", "NATURAL TITANIUM", "WHITE TITANIUM", "DESERT TITANIUM"],
            "storage": ["256GB", "512GB", "1000GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "iPhone 16 PLUS": {
            "colours": ["ULTRAMARINE", "PINK", "TEAL", "BLACK", "WHITE"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
    },
    "Samsung": {
        "Galaxy A16 (4G)": {
            "colours": ["BLACK", "LIGHT GREEN", "GREY"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
         },
        "Galaxy A16 (5G)": {
            "colours": ["BLACK", "LIGHT GREY", "LIGHT GREEN"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy A25 5G": {
            "colours": ["BLUE BLACK", "BLUE", "YELLOW"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy A26 5G": {
            "colours": ["WHITE", "BLACK", "MINT"],
            "storage": ["128", "256GB"],
            "sim_types": ["DS", "SS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
            "Galaxy A54 5G": {
              "colours": ["AWESOME GRAPHITE", "AWESOME WHITE", "AWESOME LIME", "AWESOME VIOLET"],
              "storage": ["128GB", "256GB"],
              "sim_types": ["SS", "DS"],
              "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
            },
        "Galaxy A55 5G": {
            "colours": ["AWESOME NAVY", "AWESOME ICE BLUE", "AWESOME LILAC", "AWESOME LEMON"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["DS", "SS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Galaxy A56 5G": {
            "colours": ["AWESOME LIGHTGREY", "AWESOME GRAPHITE", "AWESOME OLIVE", "AWESOME PINK"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S22": {
            "colours": ["PHANTOM WHITE", "PHANTOM BLACK", "GREEN", "PINK GOLD", "GRAPHITE", "SKY BLUE", "CREAM",
                        "VIOLET"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S22+": {
            "colours": ["PHANTOM WHITE", "PHANTOM BLACK", "GREEN", "PINK GOLD", "GRAPHITE", "SKY BLUE", "CREAM",
                        "VIOLET"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S22 Ultra": {
            "colours": ["PHANTOM WHITE", "PHANTOM BLACK", "GREEN", "BURGUNDY", "GRAPHITE", "SKY BLUE", "RED"],
            "storage": ["128GB", "256GB", "512GB", "1TB"],
            "sim_types": ["DS", "SS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S23": {
            "colours": ["PHANTOM BLACK", "CREAM", "GREEN", "LAVENDER"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S23 PLUS": {
            "colours": ["PHANTOM BLACK", "CREAM", "GREEN", "LAVENDER"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S23 ULTRA": {
            "colours": ["PHANTOM BLACK", "CREAM", "GREEN", "LAVENDER"],
            "storage": ["256GB", "512GB", "1TB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S23 FE": {
            "colours": ["MINT", "GRAPHITE", "CREAM", "PURPLE", "INDIGO", "TANGERINE"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S24": {
            "colours": ["ONYX BLACK", "MARBLE GREY", "COBALT VIOLET", "AMBER YELLOW", "JADE GREEN", "SAPPHIRE BLUE",
                        "SANDSTONE ORANGE"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S24 PLUS": {
            "colours": ["ONYX BLACK", "MARBLE GREY", "COBALT VIOLET", "AMBER YELLOW", "JADE GREEN", "SAPPHIRE BLUE",
                        "SANDSTONE ORANGE"],
            "storage": ["256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S24 ULTRA": {
            "colours": ["TITANIUM BLACK", "TITANIUM GREY", "TITANIUM VIOLET", "TITANIUM YELLOW", "TITANIUM BLUE",
                        "TITANIUM GREEN", "TITANIUM ORANGE"],
            "storage": ["256GB", "512GB", "1TB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S24 FE": {
            "colours": ["MINT", "GRAY", "BLUE", "YELLOW"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S25": {
            "colours": ["ICYBLUE", "NAVY", "SILVER SHADOW", "MINT", "BLUEBLACK", "CORALRED", "PINKGOLD"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S25+": {
            "colours": ["ICYBLUE", "NAVY", "SILVER SHADOW", "MINT", "BLUEBLACK", "CORALRED", "PINKGOLD"],
            "storage": ["256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S25 Ultra": {
            "colours": ["TITANIUM SILVERBLUE", "TITANIUM BLACK", "TITANIUM WHITESILVER", "TITANIUM GREY",
                        "TITANIUM JETBLACK", "TITANIUM JADEGREEN", "TITANIUM PINKGOLD"],
            "storage": ["256GB", "512GB", "1TB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
        "Galaxy S25 Edge": {
                               "colours": ["TITANIUM SILVER", "TITANIUM JETBLACK", "TITANIUM ICYBLUE"],
                               "storage": ["256GB", "512GB"],
                               "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"]
        },
    },
    "Google": {
        "Pixel 7": {
            "colours": ["SNOW", "LEMON GRASS", "OBSIDIAN"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 7 Pro": {
            "colours": ["OBSIDIAN", "SNOW", "HAZEL"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 7a": {
            "colours": ["CHARCOAL", "SNOW", "SEA", "CORAL"],
            "storage": ["128GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 8": {
            "colours": ["OBSIDIAN", "HAZEL", "ROSE", "MINT"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 8 Pro": {
            "colours": ["OBSIDIAN", "BAY", "PORCELAIN", "MINT"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 8a": {
            "colours": ["OBSIDIAN", "PORCELAIN", "BAY", "MINT", "Aloe", "Coral"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 9": {
            "colours": ["OBSIDIAN", "PORCELAIN", "JADE", "PEONY"],
            "storage": ["128GB", "256GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 9 Pro": {
            "colours": ["OBSIDIAN", "PORCELAIN", "JADE", "PEONY", "HAZEL"],
            "storage": ["128GB", "256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        },
        "Pixel 9 Pro XL": {
            "colours": ["OBSIDIAN", "PORCELAIN", "JADE"],
            "storage": ["256GB", "512GB"],
            "sim_types": ["SS", "DS"],
            "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
        }
    },
        "Honor": {
            "Magic5 Lite": {
                "colours": ["MIDNIGHT BLACK", "EMERALD GREEN", "TITANIUM SILVER"],
                "storage": ["128GB"],
                "sim_types": ["DS"],
                "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
            },
            "Magic5 Pro": {
                "colours": ["MEADOW GREEN", "BLACK"],
                "storage": ["512GB"],
                "sim_types": ["DS"],
                "conditions": ["FAIR", "GOOD", "EXCELLENT", "BROKEN"],
            }

        },
        "NOTHING":{
            "2":{
                "colours": ["BLACK", "WHITE", "GRAY"],
                "storage": ["128GB", "256GB", "512GB"],
                "sim_types": ["DS"],
                "conditions": ["FAIR", "GOOD", "EXCELLENT", "CRACKED", "BROKEN"],
            },
            "2A": {
                "colours": ["BLACK", "WHITE", "GRAY"],
                "storage": ["128GB", "256GB", "512GB"],
                "sim_types": ["DS"],
                "conditions": ["FAIR", "GOOD", "EXCELLENT", "CRACKED", "BROKEN"],
            }
        }
}

def hyphen_free_upper(s: str) -> str:
    return " ".join(s.split()).upper()

# Build uppercase, space-preserving lookup (NO hyphenization inside tokens)
ALLOWED_MODELS: dict[str, set[str]] = {
    hyphen_free_upper(make): {hyphen_free_upper(model) for model in models.keys()}
    for make, models in MODEL_DEF.items()
}

ALLOWED_MAKES: set[str] = set(ALLOWED_MODELS.keys())

# Fixed sets
ALLOWED_STORAGE = {"64GB","128GB","256GB","512GB","1000GB","2000GB","1TB","2TB"}
ALLOWED_SIM = {"SS","DS","ES"}
ALLOWED_GRADE = {"FAIR","GOOD","EXCELLENT","CRACKED", "BROKEN"}
